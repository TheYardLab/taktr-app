"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[489],{3820:function(e,t,n){n.r(t),n.d(t,{EXPORT_LOGO_KEY:function(){return a},chooseAndStoreLogo:function(){return h},clearStoredLogo:function(){return c},exportElementToPdf:function(){return r},getStoredLogo:function(){return d}});var o=n(1120),l=n.n(o),i=n(1819);async function r(e,t){var n,o;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{logo:a,title:d="",orientation:c="l",pageSize:h="a4",margin:u=24,scale:g=2}=r,s=null===(n=(o=window).__TAKTR_GET_EXPORT_SIZE)||void 0===n?void 0:n.call(o),f=s?e.querySelector("[data-export-width][data-export-height]"):null,m=(null==s?void 0:s.w)||(f?f.scrollWidth:e.scrollWidth),p=(null==s?void 0:s.h)||(f?f.scrollHeight:e.scrollHeight),y=e.cloneNode(!0);y.style.width=m+"px",y.style.height=p+"px",y.style.maxWidth="none",y.style.maxHeight="none",y.style.overflow="visible";let w=document.createElement("div");w.style.position="fixed",w.style.left="-100000px",w.style.top="0",w.appendChild(y),document.body.appendChild(w);try{let e=await l()(y,{backgroundColor:"#ffffff",scale:g,useCORS:!0,logging:!1,width:m,height:p,windowWidth:m,windowHeight:p}),n=new i.ZP({orientation:c,unit:"pt",format:h}),o=n.internal.pageSize.getWidth(),r=n.internal.pageSize.getHeight(),s=o-2*u,f=r-2*u-36,w=e.height*s/e.width,v=w,x=0,S=f/w*e.height,E=0;for(;v>0;){if(E>0&&n.addPage(),a)try{n.addImage(a,"PNG",u,u,79.2,36)}catch(e){}d&&(n.setFontSize(12),n.text(d,o/2,u+18+4,{align:"center",baseline:"middle"}));let t=e.width,l=Math.min(S,e.height-x),i=l/e.height*w,r=document.createElement("canvas");r.width=t,r.height=l,r.getContext("2d").drawImage(e,0,x,t,l,0,0,t,l);let c=r.toDataURL("image/png");n.addImage(c,"PNG",u,u+36,s,i,void 0,"FAST"),v-=i,x+=l,E++}n.save(t)}finally{document.body.removeChild(w)}}let a="exportLogo";function d(){try{return localStorage.getItem(a)}catch(e){return null}}function c(){try{localStorage.removeItem(a)}catch(e){}}async function h(){return new Promise(e=>{let t=document.createElement("input");function n(){document.body.removeChild(t)}t.type="file",t.accept="image/*",t.style.position="fixed",t.style.left="-9999px",document.body.appendChild(t),t.onchange=()=>{var o;let l=null===(o=t.files)||void 0===o?void 0:o[0];if(!l){n(),e(null);return}let i=new FileReader;i.onload=()=>{let t=String(i.result||"");try{localStorage.setItem(a,t)}catch(e){}n(),e(t)},i.onerror=()=>{n(),e(null)},i.readAsDataURL(l)},t.click()})}}}]);