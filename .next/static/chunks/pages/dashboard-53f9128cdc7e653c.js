(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{528:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return a(6624)}])},1225:function(e,t,a){"use strict";a.d(t,{db:function(){return c},l2:function(){return d}});var r=a(3977),s=a(9828),n=a(6689),l=a(5876);let o={apiKey:"AIzaSyBRVPRrAWtpWt10IOTw8TTNIfuxcpnaLxo",authDomain:"taktr-app.firebaseapp.com",projectId:"taktr-app",storageBucket:"taktr-app.appspot.com",messagingSenderId:"683183285107",appId:"1:683183285107:web:cd34625a816437f84f9b06"};o.apiKey||console.error("Missing NEXT_PUBLIC_FIREBASE_* values. Check .env.local and restart the dev server.");let d=(0,r.C6)().length?(0,r.Mq)():(0,r.ZF)(o),c=(0,s.ad)(d);(0,n.cF)(d);let i=(0,l.v0)(d);window.app=d,window.db=c,window.auth=i,t.ZP=d},6624:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return P}});var r=a(5893),s=a(7294),n=a(9008),l=a.n(n),o=a(5675),d=a.n(o),c=a(1163),i=a(5152),u=a.n(i),p=a(5876),m=a(9828),x=a(1225);let h=(0,s.createContext)(void 0);function b(e){let{children:t}=e,a=(0,s.useMemo)(()=>(0,p.v0)(x.l2),[]),[n,l]=(0,s.useState)(null),[o,d]=(0,s.useState)(null),[c,i]=(0,s.useState)([]),[u,b]=(0,s.useState)(!0),[g,j]=(0,s.useState)(null),[f,v]=(0,s.useState)(null);(0,s.useEffect)(()=>{let e=(0,p.Aj)(a,e=>{var t;l(e),d(null!==(t=null==e?void 0:e.uid)&&void 0!==t?t:null)});return()=>e()},[a]),(0,s.useEffect)(()=>{let e;return async function(){if(!o){i([]),b(!1);return}try{b(!0),j(null);let t=(0,m.IO)((0,m.hJ)(x.db,"projects"),(0,m.ar)("members.".concat(o),"==",!0));e=(0,m.cf)(t,e=>{let t=[];e.forEach(e=>t.push({id:e.id,...e.data()})),i(t),b(!1),!f&&t.length>0&&v(t[0].id)},e=>{console.error("projects snapshot error:",e),j((null==e?void 0:e.message)||"Failed to load projects"),b(!1)})}catch(e){console.error("projects query error:",e),j((null==e?void 0:e.message)||"Failed to load projects"),b(!1)}}(),()=>{e&&e()}},[o,f]);let y=(0,s.useMemo)(()=>{var e;return f&&null!==(e=c.find(e=>e.id===f))&&void 0!==e?e:null},[c,f]),w=async e=>{if(!o)throw Error("Not signed in");let t=(0,m.hJ)(x.db,"projects"),a=await (0,m.ET)(t,{name:e,ownerId:o,members:{[o]:!0},createdAt:(0,m.Bt)(),updatedAt:(0,m.Bt)()});return v(a.id),a.id},N=async e=>{if(!o)throw Error("Not signed in");let t=(0,m.JU)(x.db,"projects",e);await (0,m.oe)(t),f===e&&v(null)};return(0,r.jsx)(h.Provider,{value:{user:n,uid:o,projects:c,loadingProjects:u,projectsError:g,selectedProjectId:f,setSelectedProjectId:v,selectedProject:y,projectId:f,createProject:w,deleteProject:N},children:t})}let g=e=>{let{message:t}=e;return(0,r.jsx)("div",{className:"rounded border p-3 text-sm text-gray-600",children:t})},j=e=>{if(!e)return"";let t=new Date(e);if(Number.isNaN(t.getTime()))return"";let a=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return"".concat(t.getFullYear(),"-").concat(a,"-").concat(r)},f=e=>{if(!e)return"";if("string"==typeof e)return e.split("T")[0]||e;if(null==e?void 0:e.seconds)return j(1e3*e.seconds);let t=new Date(e);return Number.isNaN(t.getTime())?"":j(t)};async function v(e){return e?(await new Promise(e=>setTimeout(e,0)),await new Promise((t,a)=>{let r=new FileReader;r.onerror=()=>a(Error("Failed to read file")),r.onload=()=>t(String(r.result||"")),r.readAsDataURL(e)})):""}let y=u()(()=>a.e(863).then(a.bind(a,1863)).then(e=>e.default).catch(()=>({default:e=>{let{projectId:t}=e;return(0,r.jsx)(g,{message:"UploadSchedule not found. Create components/UploadSchedule.tsx (project: ".concat(t,").")})}})),{loadableGenerated:{webpack:()=>[1863]},ssr:!1}),w=u()(()=>a.e(620).then(a.bind(a,9620)).then(e=>e.default).catch(()=>({default:e=>{let{projectId:t}=e;return(0,r.jsx)(g,{message:"TaktPlanSection not found. Create components/TaktPlanSection.tsx (project: ".concat(t,").")})}})),{loadableGenerated:{webpack:()=>[9620]},ssr:!1}),N=u()(()=>a.e(138).then(a.bind(a,5138)).then(e=>e.default).catch(()=>({default:e=>{let{projectId:t}=e;return(0,r.jsx)(g,{message:"GanttView not found. Create components/views/GanttView.tsx (project: ".concat(t,").")})}})),{loadableGenerated:{webpack:()=>[5138]},ssr:!1}),S=u()(()=>a.e(853).then(a.bind(a,4853)).then(e=>e.default).catch(()=>({default:e=>{let{tasks:t}=e;return(0,r.jsx)(g,{message:"SCurve component not found. Create components/SCurve.tsx. (Got ".concat(t.length," tasks)")})}})),{loadableGenerated:{webpack:()=>[4853]},ssr:!1}),k=u()(()=>a.e(694).then(a.bind(a,6694)).then(e=>e.default).catch(()=>({default:e=>{let{children:t}=e;return(0,r.jsx)(g,{message:"Resizable panel not found. Create components/ui/Resizable.tsx."})}})),{loadableGenerated:{webpack:()=>[6694]},ssr:!1});function C(e,t){let a=(0,m.hJ)(x.db,"projects",e,"tasks");return(0,m.cf)(a,e=>{let a=[];e.forEach(e=>{let t=e.data();a.push({id:e.id,name:t.name||t.task||"",trade:t.trade||"",subcontractor:t.subcontractor||t.vendor||"",status:(t.status||"").toString(),startDate:f(t.startDate||t.start||t.plannedStart),endDate:f(t.endDate||t.finish||t.plannedFinish)})}),a.sort((e,t)=>{let a=e.startDate||"",r=t.startDate||"";return a&&r&&a!==r?a.localeCompare(r):a&&!r?-1:!a&&r?1:(e.name||"").localeCompare(t.name||"")}),t(a)})}function D(e){let{projectId:t}=e,[a,n]=(0,s.useState)([]),[l,o]=(0,s.useState)(null),[d,c]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=C(t,n);return()=>e()},[t]);let i=async(e,a,r)=>{n(t=>t.map(t=>t.id===e?{...t,[a]:r}:t)),o(e);try{let s=(0,m.JU)(x.db,"projects",t,"tasks",e),n={};"name"===a?n.name=r:"trade"===a?n.trade=r:"subcontractor"===a?n.subcontractor=r:"status"===a?n.status=r:"startDate"===a?n.startDate=r||null:"endDate"===a&&(n.endDate=r||null),await (0,m.r7)(s,n)}finally{o(null)}},u=async()=>{c(!0);try{await (0,m.ET)((0,m.hJ)(x.db,"projects",t,"tasks"),{name:"New Task",trade:"",subcontractor:"",status:"not started",startDate:j(new Date),endDate:j(Date.now()+864e5),createdAt:(0,m.Bt)(),updatedAt:(0,m.Bt)()})}finally{c(!1)}},p=async e=>{await (0,m.oe)((0,m.JU)(x.db,"projects",t,"tasks",e))};return(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsxs)("div",{className:"mb-3 flex items-center justify-between gap-2",children:[(0,r.jsx)("h3",{className:"text-base font-semibold",children:"Tasks"}),(0,r.jsx)("button",{onClick:u,disabled:d,className:"rounded bg-blue-600 px-3 py-1.5 text-sm text-white disabled:opacity-50",children:d?"Adding…":"Add Task"})]}),(0,r.jsx)("div",{className:"overflow-auto rounded border",children:(0,r.jsxs)("table",{className:"min-w-[900px] w-full text-sm",children:[(0,r.jsx)("thead",{className:"bg-gray-50 text-left",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-3 py-2",children:"Trade"}),(0,r.jsx)("th",{className:"px-3 py-2",children:"Task"}),(0,r.jsx)("th",{className:"px-3 py-2",children:"Subcontractor"}),(0,r.jsx)("th",{className:"px-3 py-2",children:"Status"}),(0,r.jsx)("th",{className:"px-3 py-2",children:"Start"}),(0,r.jsx)("th",{className:"px-3 py-2",children:"Finish"}),(0,r.jsx)("th",{className:"px-3 py-2 text-right",children:"Actions"})]})}),(0,r.jsx)("tbody",{children:a.map(e=>(0,r.jsxs)("tr",{className:"border-t",children:[(0,r.jsx)("td",{className:"px-3 py-2",children:(0,r.jsx)("input",{className:"w-full rounded border px-2 py-1",value:e.trade||"",onChange:t=>i(e.id,"trade",t.target.value)})}),(0,r.jsx)("td",{className:"px-3 py-2",children:(0,r.jsx)("input",{className:"w-full rounded border px-2 py-1",value:e.name,onChange:t=>i(e.id,"name",t.target.value)})}),(0,r.jsx)("td",{className:"px-3 py-2",children:(0,r.jsx)("input",{className:"w-full rounded border px-2 py-1",value:e.subcontractor||"",onChange:t=>i(e.id,"subcontractor",t.target.value)})}),(0,r.jsx)("td",{className:"px-3 py-2",children:(0,r.jsxs)("select",{className:"w-full rounded border px-2 py-1",value:e.status||"",onChange:t=>i(e.id,"status",t.target.value),children:[(0,r.jsx)("option",{value:"not started",children:"Not Started"}),(0,r.jsx)("option",{value:"in progress",children:"In Progress"}),(0,r.jsx)("option",{value:"done",children:"Done"}),(0,r.jsx)("option",{value:"completed",children:"Completed"})]})}),(0,r.jsx)("td",{className:"px-3 py-2",children:(0,r.jsx)("input",{type:"date",className:"rounded border px-2 py-1",value:e.startDate||"",onChange:t=>i(e.id,"startDate",t.target.value)})}),(0,r.jsx)("td",{className:"px-3 py-2",children:(0,r.jsx)("input",{type:"date",className:"rounded border px-2 py-1",value:e.endDate||"",onChange:t=>i(e.id,"endDate",t.target.value)})}),(0,r.jsxs)("td",{className:"px-3 py-2 text-right",children:[(0,r.jsx)("button",{onClick:()=>p(e.id),className:"rounded bg-red-600 px-2 py-1 text-xs text-white",children:"Delete"}),l===e.id&&(0,r.jsx)("span",{className:"ml-2 text-xs text-gray-500",children:"Saving…"})]})]},e.id))})]})})]})}let E=e=>new Date(e.getFullYear(),e.getMonth(),1),I=e=>{let t=new Date(e),a=t.getDay();return t.setDate(t.getDate()-a),t.setHours(0,0,0,0),t};function T(e){let{projectId:t}=e,[a,n]=(0,s.useState)([]),[l,o]=(0,s.useState)("month"),[d,c]=(0,s.useState)(new Date);if((0,s.useEffect)(()=>{let e=C(t,n);return()=>e()},[t]),"list"===l){let e=[...a].sort((e,t)=>(e.startDate||"").localeCompare(t.startDate||""));return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-base font-semibold",children:"Calendar (List)"}),(0,r.jsx)("button",{className:"rounded border px-3 py-1.5 text-sm",onClick:()=>o("month"),children:"Month View"})]}),(0,r.jsx)("ul",{className:"space-y-2",children:e.map(e=>(0,r.jsxs)("li",{className:"rounded border p-2",children:[(0,r.jsx)("div",{className:"font-medium",children:e.name}),(0,r.jsxs)("div",{className:"text-xs text-gray-600",children:[e.trade?"".concat(e.trade," • "):"",e.subcontractor||""]}),(0,r.jsxs)("div",{className:"text-xs text-gray-600",children:[e.startDate||"?"," → ",e.endDate||"?"]}),(0,r.jsxs)("div",{className:"text-xs",children:["Status: ",e.status||"not set"]})]},e.id))})]})}let i=I(E(d)),u=[];for(let e=0;e<42;e++){let t=new Date(i);t.setDate(i.getDate()+e),u.push(t)}let p=new Map;for(let e of a){if(!e.startDate)continue;let t=e.startDate,a=p.get(t)||[];a.push(e),p.set(t,a)}let m=d.toLocaleString(void 0,{month:"long",year:"numeric"});return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{className:"rounded border px-2 py-1 text-sm",onClick:()=>c(new Date(d.getFullYear(),d.getMonth()-1,1)),children:"◀"}),(0,r.jsx)("div",{className:"text-base font-semibold",children:m}),(0,r.jsx)("button",{className:"rounded border px-2 py-1 text-sm",onClick:()=>c(new Date(d.getFullYear(),d.getMonth()+1,1)),children:"▶"})]}),(0,r.jsx)("button",{className:"rounded border px-3 py-1.5 text-sm",onClick:()=>o("list"),children:"List View"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-7 gap-2 text-xs",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,r.jsx)("div",{className:"px-2 py-1 text-center font-semibold text-gray-600",children:e},e)),u.map((e,t)=>{let a=j(e),s=e.getMonth()===d.getMonth(),n=p.get(a)||[];return(0,r.jsxs)("div",{className:"min-h-[90px] rounded border p-1 ".concat(s?"bg-white":"bg-gray-50 text-gray-400"),children:[(0,r.jsx)("div",{className:"mb-1 text-right text-[10px]",children:e.getDate()}),(0,r.jsx)("div",{className:"space-y-1",children:n.map(e=>(0,r.jsx)("div",{className:"truncate rounded bg-blue-100 px-1 py-0.5",children:e.name},e.id))})]},t)})]})]})}function P(){let e=(0,c.useRouter)(),[t,n]=(0,s.useState)([]),[o,i]=(0,s.useState)(""),[u,h]=(0,s.useState)(null),[g,j]=(0,s.useState)(!1),[f,E]=(0,s.useState)(!1),I=(0,s.useMemo)(()=>{var e;return"Taktr — ".concat((null===(e=t.find(e=>e.id===o))||void 0===e?void 0:e.name)||o||"Dashboard")},[t,o]),P=async()=>{try{var e;let r=document.getElementById("export-root");if(!r){alert("Nothing to export");return}let s=await Promise.all([a.e(847),a.e(443),a.e(412),a.e(485)]).then(a.bind(a,6485));await s.exportElementToPdf(r,"Taktr-".concat((null===(e=t.find(e=>e.id===o))||void 0===e?void 0:e.name)||"Dashboard","-").concat(M,".pdf"))}catch(e){console.error("Export failed",e),alert("Export failed. See console for details.")}},L=async()=>{try{await (0,p.w7)((0,p.v0)()),e.push("/login")}catch(e){console.error("Logout failed",e)}};async function A(){try{var t;let a=null===(t=window.prompt("Project name?"))||void 0===t?void 0:t.trim();if(!a)return;let r=(0,p.v0)().currentUser;if(!r){alert("You must be signed in to create a project.");return}let s=(await (0,m.ET)((0,m.hJ)(x.db,"projects"),{name:a,ownerId:r.uid,members:{[r.uid]:!0},createdAt:(0,m.Bt)(),updatedAt:(0,m.Bt)()})).id;i(s),localStorage.setItem("lastProjectId",s),n(e=>{let t=[...e,{id:s,name:a}];return t.sort((e,t)=>e.name.localeCompare(t.name)),t}),e.replace({pathname:"/dashboard",query:{projectId:s}},void 0,{shallow:!0})}catch(e){console.error("create project failed:",e),alert("Create project failed: ".concat((null==e?void 0:e.message)||String(e)))}}(0,s.useEffect)(()=>{let t=(0,m.cf)((0,m.hJ)(x.db,"projects"),t=>{var a,r,s;let l=[];t.forEach(e=>{var t;let a=(null===(t=e.data())||void 0===t?void 0:t.name)||e.id;l.push({id:e.id,name:a})}),l.sort((e,t)=>e.name.localeCompare(t.name)),n(l);let o=e.query.projectId||"",d=localStorage.getItem("lastProjectId"),c=o&&(null===(a=l.find(e=>e.id===o))||void 0===a?void 0:a.id)||d&&(null===(r=l.find(e=>e.id===d))||void 0===r?void 0:r.id)||(null===(s=l[0])||void 0===s?void 0:s.id)||"";i(c),c&&localStorage.setItem("lastProjectId",c)},e=>{console.error("Projects subscription error",e),h((null==e?void 0:e.message)||"Unable to load projects. Check Firestore rules/connection.")});return()=>t()},[e.query.projectId]),(0,s.useEffect)(()=>{let e=!1;return(async()=>{E(!1);let t=(0,p.v0)().currentUser;if(!t||!o){e||E(!0);return}try{await (0,m.pl)((0,m.JU)(x.db,"projects",o),{members:{[t.uid]:!0}},{merge:!0}),await (0,m.pl)((0,m.JU)(x.db,"projects",o,"members",t.uid),{uid:t.uid,role:"member",lastSeenAt:(0,m.Bt)()},{merge:!0})}catch(e){console.error("Membership upsert failed:",e)}finally{e||E(!0)}})(),()=>{e=!0}},[o]);let[M,F]=(0,s.useState)("takt"),_=function(e){let[t,a]=(0,s.useState)([]);return(0,s.useEffect)(()=>{if(!e)return;let t=C(e,a);return()=>t()},[e]),t}(o);(0,s.useMemo)(()=>{var e;return(null===(e=t.find(e=>e.id===o))||void 0===e?void 0:e.name)||o||"—"},[t,o]);let z=(0,s.useMemo)(()=>{let e=_.length,t=e=>(e||"").toLowerCase(),a=_.filter(e=>["done","completed"].includes(t(e.status))).length,r=_.filter(e=>"in progress"===t(e.status)).length;return{total:e,done:a,inProg:r,notStarted:e-a-r,pct:e?Math.round(a/e*100):0}},[_]),[U,B]=(0,s.useState)("");return(0,s.useEffect)(()=>{(async()=>{try{let e=await Promise.all([a.e(847),a.e(443),a.e(412),a.e(485)]).then(a.bind(a,6485));if("function"==typeof e.getStoredLogo){let t=e.getStoredLogo();t&&B(t)}}catch(e){}})()},[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l(),{children:(0,r.jsx)("title",{children:I})}),(0,r.jsxs)("div",{className:"mx-auto w-full max-w-screen-2xl p-4 overflow-x-hidden bg-gray-50 min-h-screen text-gray-900",children:[(0,r.jsxs)("div",{className:"mb-4 rounded border bg-white p-3 shadow flex flex-wrap items-center justify-between gap-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(d(),{src:"/Logo.png",alt:"Taktr",width:120,height:28,className:"hidden h-7 w-auto sm:block",onError:e=>{e.currentTarget.style.display="none"},unoptimized:!0}),(0,r.jsx)("div",{className:"text-xl font-semibold",children:"Project:"}),(0,r.jsx)("select",{className:"rounded border px-2 py-1",value:o,onChange:t=>{let a=t.target.value;i(a),localStorage.setItem("lastProjectId",a),e.replace({pathname:"/dashboard",query:{projectId:a}},void 0,{shallow:!0})},children:0===t.length?(0,r.jsx)("option",{value:"",children:"(no projects)"}):t.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))}),(0,r.jsx)("button",{type:"button",className:"ml-2 rounded border px-2 py-1 text-sm",onClick:A,disabled:g,children:g?"Creating…":"New"})]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,r.jsxs)("label",{className:"rounded px-2 py-1.5 text-sm border cursor-pointer",children:[(0,r.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:async e=>{try{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0],s=await Promise.all([a.e(847),a.e(443),a.e(412),a.e(485)]).then(a.bind(a,6485));if("function"==typeof s.chooseAndStoreLogo)s.chooseAndStoreLogo.length>=1&&r?await s.chooseAndStoreLogo(r):await s.chooseAndStoreLogo();else{if(!r)return;let e=await v(r),t=s.EXPORT_LOGO_KEY||"taktr.export.logo";try{localStorage.setItem(t,e)}catch(e){}}if("function"==typeof s.getStoredLogo){let e=s.getStoredLogo();e&&B(e)}else{let e=s.EXPORT_LOGO_KEY||"taktr.export.logo",t=localStorage.getItem(e)||"";t&&B(t)}alert("Logo saved for PDF exports.")}catch(e){console.error(e),alert("Unable to save logo.")}finally{e.currentTarget.value=""}}}),"Upload Export Logo"]}),U?(0,r.jsx)(d(),{src:U,alt:"Export logo preview",width:120,height:24,className:"rounded border bg-white",unoptimized:!0}):null,(0,r.jsx)("button",{className:"rounded px-3 py-1.5 text-sm border ".concat("takt"===M?"bg-blue-600 text-white":""),onClick:()=>F("takt"),children:"Takt Plan"}),(0,r.jsx)("button",{className:"rounded px-3 py-1.5 text-sm border ".concat("tasks"===M?"bg-blue-600 text-white":""),onClick:()=>F("tasks"),children:"Task View"}),(0,r.jsx)("button",{className:"rounded px-3 py-1.5 text-sm border ".concat("calendar"===M?"bg-blue-600 text-white":""),onClick:()=>F("calendar"),children:"Calendar"}),(0,r.jsx)("button",{className:"rounded px-3 py-1.5 text-sm border ".concat("gantt"===M?"bg-blue-600 text-white":""),onClick:()=>F("gantt"),children:"Gantt"}),(0,r.jsx)("button",{className:"rounded px-3 py-1.5 text-sm border ".concat("metrics"===M?"bg-blue-600 text-white":""),onClick:()=>F("metrics"),children:"Metrics"}),(0,r.jsx)("button",{className:"rounded px-3 py-1.5 text-sm border ".concat("scurve"===M?"bg-blue-600 text-white":""),onClick:()=>F("scurve"),children:"S Curve"}),(0,r.jsx)("button",{className:"rounded px-3 py-1.5 text-sm border",onClick:P,children:"Export PDF"})]}),(0,r.jsx)("div",{className:"ml-auto",children:(0,r.jsx)("button",{type:"button",onClick:L,className:"rounded bg-gray-900 px-3 py-1.5 text-sm text-white hover:bg-gray-800",children:"Logout"})})]}),o?(0,r.jsx)(b,{children:f?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"mb-4 overflow-x-auto",children:(0,r.jsx)("div",{className:"min-w-[1200px]",children:(0,r.jsx)(y,{projectId:o})})}),(0,r.jsx)("div",{id:"export-root",className:"rounded bg-white p-3 shadow overflow-visible",children:"takt"===M?(0,r.jsx)(k,{storageKey:"takt:".concat(o),defaultSize:640,minSize:360,direction:"vertical",className:"min-w-[1000px]",children:(0,r.jsx)(w,{projectId:o})},"takt-".concat(o)):"tasks"===M?(0,r.jsx)(k,{storageKey:"tasks:".concat(o),defaultSize:600,minSize:360,direction:"vertical",children:(0,r.jsx)(D,{projectId:o})},"tasks-".concat(o)):"calendar"===M?(0,r.jsx)(k,{storageKey:"calendar:".concat(o),defaultSize:700,minSize:420,direction:"vertical",children:(0,r.jsx)(T,{projectId:o})},"cal-".concat(o)):"gantt"===M?(0,r.jsx)(k,{storageKey:"gantt:".concat(o),defaultSize:640,minSize:360,direction:"both",className:"min-w-[1100px]",children:(0,r.jsx)(N,{projectId:o})},"gantt-".concat(o)):"metrics"===M?(0,r.jsx)(k,{storageKey:"metrics:".concat(o),defaultSize:460,minSize:300,direction:"vertical",children:(0,r.jsxs)("div",{className:"rounded border p-4 h-full",children:[(0,r.jsx)("div",{className:"mb-2 text-base font-semibold",children:"Metrics"}),(0,r.jsxs)("div",{className:"text-sm",children:["Total Tasks: ",z.total]}),(0,r.jsxs)("div",{className:"text-sm",children:["Done/Completed: ",z.done]}),(0,r.jsxs)("div",{className:"text-sm",children:["In Progress: ",z.inProg]}),(0,r.jsxs)("div",{className:"text-sm",children:["Not Started: ",z.notStarted]}),(0,r.jsxs)("div",{className:"mt-2 text-sm",children:["Completion: ",z.pct,"%"]})]})},"metrics-".concat(o)):(0,r.jsx)(k,{storageKey:"scurve:".concat(o),defaultSize:520,minSize:320,direction:"vertical",className:"min-w-[900px]",children:(0,r.jsx)(S,{tasks:_})},"scurve-".concat(o))})]}):(0,r.jsx)("div",{className:"rounded border bg-white p-3 text-sm text-gray-600",children:"Preparing project access…"})}):(0,r.jsxs)("div",{className:"rounded border p-4",children:[(0,r.jsx)("div",{className:"mb-2 text-gray-700",children:"No projects found."}),u&&(0,r.jsx)("div",{className:"mb-3 rounded border border-red-300 bg-red-50 p-2 text-sm text-red-700",children:u}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,r.jsx)("button",{type:"button",className:"rounded bg-blue-600 px-3 py-1.5 text-sm text-white disabled:opacity-50",onClick:A,disabled:g,children:g?"Creating…":"Create Project"}),(0,r.jsx)("button",{type:"button",className:"rounded border px-3 py-1.5 text-sm",onClick:A,disabled:g,children:"Quick Create"})]}),(0,r.jsx)("p",{className:"mt-3 text-sm text-gray-500",children:"After creating, you can upload a CSV using the Upload bar to add tasks."})]})]})]})}}},function(e){e.O(0,[703,281,828,921,888,774,179],function(){return e(e.s=528)}),_N_E=e.O()}]);