"use strict";(()=>{var e={};e.id=123,e.ids=[123],e.modules={5877:e=>{e.exports=require("firebase-admin/auth")},2594:e=>{e.exports=require("firebase-admin/firestore")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6249:(e,r)=>{Object.defineProperty(r,"l",{enumerable:!0,get:function(){return function e(r,t){return t in r?r[t]:"then"in r&&"function"==typeof r.then?r.then(r=>e(r,t)):"function"==typeof r&&"default"===t?r:void 0}}})},5424:(e,r,t)=>{t.r(r),t.d(r,{config:()=>E,default:()=>l,routeModule:()=>_});var n={};t.r(n),t.d(n,{default:()=>u});var i=t(1802),a=t(7153),o=t(6249);t(2091);var s=t(5877);async function u(e,r){if("POST"!==e.method)return r.setHeader("Allow","POST"),r.status(405).json({error:"Method not allowed"});let t=e.headers["x-admin-api-key"]||(e.headers.authorization?.startsWith("Bearer ")?e.headers.authorization.slice(7):void 0);if(!process.env.ADMIN_API_KEY||t!==process.env.ADMIN_API_KEY)return r.status(401).json({error:"Unauthorized"});let{uid:n,email:i}=e.body||{};if(!n&&!i)return r.status(400).json({error:"Provide uid or email"});try{let e=n;if(!e&&i&&(e=(await (0,s.getAuth)().getUserByEmail(i)).uid),!e)return r.status(404).json({error:"User not found"});return await (0,s.getAuth)().setCustomUserClaims(e,{admin:!0}),r.status(200).json({ok:!0,uid:e})}catch(e){return console.error("makeAdmin error:",e),r.status(500).json({error:e?.message||"Internal error"})}}let l=(0,o.l)(n,"default"),E=(0,o.l)(n,"config"),_=new i.PagesAPIRouteModule({definition:{kind:a.x.PAGES_API,page:"/api/makeAdmin",pathname:"/api/makeAdmin",bundlePath:"",filename:""},userland:n})},2091:(e,r,t)=>{t.d(r,{default:()=>u});let n=require("firebase-admin/app");var i=t(2594),a=t(5877);function o(e){if(!e)return null;try{let r=Buffer.from(e,"base64").toString("utf8");return JSON.parse(r)}catch{return null}}let s="__taktr_admin__",u=(()=>{let e=globalThis;return e[s]||(e[s]=function(){let e=(0,n.cert)(function(){let e=process.env.GOOGLE_APPLICATION_CREDENTIALS_JSON,r=function(e){if(!e)return null;try{return JSON.parse(e)}catch{return null}}(e)||o(e||"");if(r&&r.client_email&&r.private_key){let e=r.project_id||process.env.FIREBASE_PROJECT_ID,t=r.client_email,n=String(r.private_key).replace(/\\n/g,"\n");if(e&&t&&n)return{projectId:e,clientEmail:t,privateKey:n}}let t=o(process.env.FIREBASE_SERVICE_ACCOUNT_BASE64||process.env.FIREBASE_PRIVATE_KEY_BASE64||"");if(t&&t.client_email&&t.private_key){let e=t.project_id||process.env.FIREBASE_PROJECT_ID,r=t.client_email,n=String(t.private_key).replace(/\\n/g,"\n");if(e&&r&&n)return{projectId:e,clientEmail:r,privateKey:n}}let n=process.env.FIREBASE_PROJECT_ID||process.env.GOOGLE_CLOUD_PROJECT||process.env.GCLOUD_PROJECT,i=process.env.FIREBASE_CLIENT_EMAIL,a=(process.env.FIREBASE_PRIVATE_KEY||"").replace(/\\n/g,"\n");if(!n||!i||!a)throw Error("Firebase Admin credentials not found. Set GOOGLE_APPLICATION_CREDENTIALS_JSON to the FULL service account JSON   (or) FIREBASE_SERVICE_ACCOUNT_BASE64 with the JSON base64-encoded,   (or) FIREBASE_PROJECT_ID + FIREBASE_CLIENT_EMAIL + FIREBASE_PRIVATE_KEY.");return{projectId:n,clientEmail:i,privateKey:a}}()),r=0===(0,n.getApps)().length?(0,n.initializeApp)({credential:e}):(0,n.getApp)(),t=(0,i.getFirestore)(r),s=(0,a.getAuth)(r);return{app:r,db:t,auth:s}}()),e[s]})()},7153:(e,r)=>{var t;Object.defineProperty(r,"x",{enumerable:!0,get:function(){return t}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(t||(t={}))},1802:(e,r,t)=>{e.exports=t(145)}};var r=require("../../webpack-api-runtime.js");r.C(e);var t=r(r.s=5424);module.exports=t})();